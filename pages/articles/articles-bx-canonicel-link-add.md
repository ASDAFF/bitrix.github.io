---
title: Добавление canonical link на страницы сайта | Статьи CMS "1С Битрикс"
keywords: canonical битрикс, уникальные страницы, убираем дубли страниц
sidebar: articles_sidebar
folder: articles
permalink: articles-bx-canonicel-link-add.html
summary: false
toc: false
---

### Задача

Добавить на все страницы сайта метатег canonical. Для товаров проверять значение определенного свойства инфоблока, в случае его заполненности значение брать из него.

### Решение

Во первых определим какие страницы у нас есть на сате и как они формируются:

* обычные страницы
* страницы новостей и статей, которые выводятся комплексными компонентами, такими как bitrix:news
* страницы каталога товаров, которые формируются компонентом bitrix:catalog

Для каждого из этих типов страниц нужно сформировать link canonical.

#### Canonical для обычных страниц сайта и страницы новостей

Для обычных страниц сайта сформируем значение тега canonical из данных массива $_SERVER и значения адреса страницы, но учтем, что не все страницы обычные, добавим условие для исключения страниц каталога, т.к. для них формирование тега отличается. Страницы новостей исключать не будем, по условиям задачи они не нуждаются в особой логике.

Этот код нужно поместить в файл **footer.php** шаблона сайта:

 ```php
<?
if (!CSite::InDir('/catalog/')) {
    $canonical = $_SERVER["REQUEST_SCHEME"] . '://' . $_SERVER["HTTP_HOST"] . $curPage;
    $assets->addString('<link rel="canonical" href="' . $canonical . '" />');
}
?>
 ```
